# Community Notes API - Environment Configuration
# Copy this file to .env and customize for your environment

# =============================================================================
# API Settings
# =============================================================================
CN_APP_NAME="Community Notes API"
CN_APP_VERSION="0.1.0"
CN_DEBUG=false

# =============================================================================
# Database
# =============================================================================
# SQLite (default for development)
CN_DATABASE_URL=sqlite:///./data/community_notes.db

# PostgreSQL (for production)
# CN_DATABASE_URL=postgresql://cn_user:cn_password@cn-postgres:5432/community_notes

# =============================================================================
# Scoring Configuration
# =============================================================================

# How often to run batch scoring (minutes)
CN_SCORING_INTERVAL_MINUTES=30

# Minimum ratings before a note can get a status
CN_MIN_RATINGS_FOR_STATUS=5

# Minimum ratings before a user's factor is considered reliable
CN_MIN_RATINGS_FOR_USER_FACTOR=5

# =============================================================================
# Algorithm Thresholds
# These can be tuned for political content sensitivity
# =============================================================================

# Note intercept must exceed this to be "helpful"
# Higher = stricter, fewer notes marked helpful
CN_HELPFUL_INTERCEPT_THRESHOLD=0.40

# Below this = "not helpful"
CN_NOT_HELPFUL_INTERCEPT_THRESHOLD=-0.05

# Factor magnitude threshold (notes with too extreme factor aren't bridging)
CN_HELPFUL_FACTOR_THRESHOLD=0.5

# =============================================================================
# Matrix Factorization Parameters
# =============================================================================
CN_MF_NUM_FACTORS=1
CN_MF_LEARNING_RATE=0.2
CN_MF_REGULARIZATION=0.03

# =============================================================================
# Security
# =============================================================================

# API key for internal service authentication (optional)
# Set this if calling from accountability-backend
# CN_API_KEY=your-secret-api-key

# CORS - allowed origins (comma-separated)
CN_ALLOWED_ORIGINS=http://localhost:8000,http://localhost:3000

# =============================================================================
# Logging
# =============================================================================
CN_LOG_LEVEL=INFO
